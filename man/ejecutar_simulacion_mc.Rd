% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ejecutar_simulacion_mc.R
\name{ejecutar_simulacion_mc}
\alias{ejecutar_simulacion_mc}
\title{Ejecuta una Simulación Monte Carlo de la Paradoja de Simpson}
\usage{
ejecutar_simulacion_mc(N_simulaciones = 1000, ...)
}
\arguments{
\item{N_simulaciones}{El número de veces que se repetirá la simulación (el
número de universos a generar).}

\item{...}{Argumentos adicionales que se pasarán directamente a
\code{generar_universo_simpson()}. Esto permite configurar parámetros como
\code{n_empresas}, \code{p_cultura_alta}, etc., para toda la simulación.}
}
\value{
Un \code{tibble} donde cada fila corresponde a una simulación exitosa,
con las siguientes columnas:
\itemize{
\item \code{id_simulacion}: Identificador numérico de la simulación.
\item \code{ate_naive}: El ATE "ingenuo" calculado a nivel agregado.
\item \code{ate_ajustado_cultura_baja}: El ATE calculado para el subgrupo de "Baja" cultura de pago.
\item \code{ate_ajustado_cultura_alta}: El ATE calculado para el subgrupo de "Alta" cultura de pago.
}
}
\description{
Esta función orquesta una simulación Monte Carlo. Llama repetidamente a la
función \code{generar_universo_simpson()} para generar múltiples universos de datos
y calcula métricas clave para cada uno. El objetivo es evaluar la
distribución de los estimadores del Efecto de Tratamiento Promedio (ATE)
y demostrar la consistencia de la paradoja.
}
\examples{
# Ejecuta una simulación pequeña con 10 iteraciones y 500 empresas por universo
try({ # try() para evitar errores en CRAN si los paquetes no están
  resultados <- ejecutar_simulacion_mc(N_simulaciones = 10, n_empresas = 500)
  print(resultados)
  # Calcula el ATE naive promedio a lo largo de todas las simulaciones
  mean(resultados$ate_naive)
})
}
